---
title: Исключения
breadcrumbs: false
weight: 5
cascade:
  type: docs
---

Исключения позволяют задать индивидуальные правила для определённых слов или регулярных выражений. Это нужно, чтобы конкретные слова/фразы не блокировались стандартными фильтрами или чтобы для них действовали собственные лимиты и наказания.

### `!am ex list`
Показать список всех текущих исключений. Команда выводит список слов или регулярных выражений с их лимитами сообщений и наказаниями.

Пример:
```text
!am ex list
```

---

### `!am ex add`
Добавляет новое исключение в систему фильтрации сообщений. Исключение может быть обычным (по словам/фразам) или на основе регулярного выражения.

**Формат:**
- `!am ex (add) <лимит> <наказания> <слова/фразы через запятую> <*опции>`
- `!am ex (add) <лимит> <наказания> re <имя> <регулярное выражение> <*опции>`

**Параметры:**
- `<лимит>` — число сообщений, после которых применяется исключение (`2–15`).
- `<наказания>` — список через запятую. Возможные значения:
  - `*` — наследовать наказания из команды `!am p`
  - `-` — удалить сообщение
  - `1-1209600` — таймаут в секундах
  - `0` — бан
- `<слова/фразы>` — одно или несколько слов/фраз через запятую.
- `re <имя> <регулярное выражение>` — задать исключение по регулярному выражению. `<имя>` используется как ключ исключения.
- `<*опции>` — дополнительные параметры (см. [Опции исключений](exceptions-options))

Примеры:
```text
!am ex add 5 - привет,здравствуйте
!am ex 10 300 слово
!am ex add 3 0 -regex ^spam[0-9]+
!am ex 4 *,1-600 привет,пока
!am ex add 2 * re spam_rule ^spam[0-9]+$
```

---

### `!am ex set ml`
Изменяет лимит сообщений для существующих исключений. Можно указать одно или несколько слов, фраз или имён регулярных выражений через запятую.

**Формат:**
`!am ex set ml <лимит> <слова/фразы/имя regex> <*опции>`

**Параметры:**
- `<лимит>` — новое количество сообщений.
- `<слова/фразы/имя regex>` — список слов, фраз или имён регулярных выражений.
- `<*опции>` — дополнительные параметры (см. [Опции исключений](/antispam/exceptions-options)).

Пример:
```text
!am ex set ml 10 привет,пока
```
Лимит сообщений для исключений `привет` и `пока` будет изменён на **10 сообщений**.

---

### `!am ex set p`
Изменяет наказания, применяемые к существующим исключениям.

**Формат:**
`!am ex set p <наказания> <слова/фразы/имя regex> <*опции>`

**Параметры:**
- `<наказания>` — список наказаний через запятую (см. [!am ex add](#am-ex-add-лимит-наказания-словарагех)).
- `<слова/фразы/имя regex>` — одно или несколько слов, фраз или имён регулярных выражений.
- `<*опции>` — дополнительные параметры (см. [Опции исключений](/antispam/exceptions-options)).

Пример:
```text
!am ex set p -,600,0 привет
```
Для исключения `привет` теперь будут применяться наказания в следующем порядке: удаление сообщения, таймаут на 600 секунд, бан.

---

### `!am ex set`
Изменяет дополнительные параметры исключений, не затрагивая лимиты или наказания.

**Формат:**
`!am ex set <слова/фразы/имя regex> <опции>`

**Параметры:**
- `<слова/фразы/имя regex>` — одно или несколько слов, фраз или имён регулярных выражений.
- `<опции>` — дополнительные параметры (см. [Опции исключений](/antispam/exceptions-options)).

Пример:
```text
!am ex set привет -nosub -novip
```
Для исключения `привет` будут изменены общие опции — теперь оно не действует для випов и платных подписчиков канала.

---

### `!am ex del`
Удалить одно или несколько исключений. Указываются через запятую.

**Формат:**
`!am ex del <слова/фразы/имя regex>`

**Допустимые значения:**
- **<слова/фразы/имя regex>** — одно или несколько слов, фраз или имя регулярного выражения.

Примеры:
```text
!am ex del привет
!am ex del привет,здравствуйте
!am ex del spam_rule
```

